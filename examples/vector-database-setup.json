{
  "name": "Neo4j Vector Database Setup",
  "nodes": [
    {
      "parameters": {
        "resource": "graphDb",
        "cypherQuery": "CREATE VECTOR INDEX vector_index IF NOT EXISTS FOR (d:Document) ON (d.embedding) OPTIONS {indexConfig: {`vector.dimensions`: 1536, `vector.similarity_function`: 'cosine'}}"
      },
      "type": "CUSTOM.neo4j",
      "typeVersion": 1,
      "position": [280, 180],
      "id": "create-vector-index",
      "name": "1. Create Vector Index",
      "credentials": {
        "neo4jApi": {
          "name": "Neo4j account"
        }
      }
    },
    {
      "parameters": {
        "resource": "graphDb",
        "cypherQuery": "SHOW INDEXES YIELD name, type WHERE type CONTAINS 'VECTOR' RETURN name, type"
      },
      "type": "CUSTOM.neo4j",
      "typeVersion": 1,
      "position": [480, 180],
      "id": "verify-index",
      "name": "2. Verify Index Created",
      "credentials": {
        "neo4jApi": {
          "name": "Neo4j account"
        }
      }
    },
    {
      "parameters": {
        "resource": "graphDb",
        "cypherQuery": "CREATE CONSTRAINT document_id_unique IF NOT EXISTS FOR (d:Document) REQUIRE d.id IS UNIQUE"
      },
      "type": "CUSTOM.neo4j",
      "typeVersion": 1,
      "position": [680, 180],
      "id": "create-constraint",
      "name": "3. Create ID Constraint",
      "credentials": {
        "neo4jApi": {
          "name": "Neo4j account"
        }
      }
    },
    {
      "parameters": {
        "resource": "graphDb",
        "cypherQuery": "RETURN 'Vector database setup complete!' as status, datetime() as completed_at"
      },
      "type": "CUSTOM.neo4j",
      "typeVersion": 1,
      "position": [880, 180],
      "id": "setup-complete",
      "name": "4. Setup Complete",
      "credentials": {
        "neo4jApi": {
          "name": "Neo4j account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [80, 180],
      "id": "manual-trigger",
      "name": "Start Setup"
    }
  ],
  "connections": {
    "Start Setup": {
      "main": [
        [
          {
            "node": "1. Create Vector Index",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1. Create Vector Index": {
      "main": [
        [
          {
            "node": "2. Verify Index Created",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2. Verify Index Created": {
      "main": [
        [
          {
            "node": "3. Create ID Constraint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3. Create ID Constraint": {
      "main": [
        [
          {
            "node": "4. Setup Complete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "instanceId": "vector-setup"
  }
}